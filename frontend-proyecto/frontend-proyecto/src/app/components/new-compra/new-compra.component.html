<br/>
<div class="card">
    <div class="col-md-12 mt-3">
        <h1 style="text-align:center;">Realizar una compra</h1>
        <h5 style="text-align:center;">Ingrese los datos de la nueva compra.</h5>
        <br/>
        <form class="col-md-6 mr-auto ml-auto" #compraNewForm="ngForm" (ngSubmit)="onSubmit(compraNewForm)">
            <div class="form-group">
                <label>codigo de compra</label>
                <input type="text" name="id" #nombre="ngModel" [(ngModel)]="compra.id" class="form-control" required pattern="[a-zA-Z]+">
            </div>
            <div class="form-row">
                <div class="form-group col-md-6">
                    <label>Usuario</label>
                    <input type="text" name="existenciaActual" #existenciaActual="ngModel" [(ngModel)]="compra.idUsuario" class="form-control" required pattern="[0-9]+" placeholder="0">
                </div>
                <div class="form-group col-md-6">
                    <label>Cliente</label>
                    <select name="idCategoria" #idCliente="ngModel" [(ngModel)]="compra.idCliente" class="form-control">
              <option *ngFor="let cliente of clientes" value="{{cliente.id}}" >
              {{cliente.nombre}}
              </option>
            </select>
                </div>
                <div class="form-group col-md-6">
                    <label>Total</label>
                    <input type="text" name="maximo" #maximo="ngModel" [(ngModel)]="compra.total" class="form-control" required pattern="[0-9]+" placeholder="0">
                </div>
            </div>
            <input type="submit" value="Ingresar" class="btn btn-success">
            <br>
            <br>
        </form>
    </div>
</div>


<div class="loading" *ngIf="!detalles">
    Cargando...
</div>
<div *ngIf="detalles">
    <br>
    <h3>Detalles de la compra</h3>
    <hr>
</div>
<table class="table table-bordered table-striped" *ngIf="detalles">
    <thead class="table-success">
        <tr>
            <th scope="col">ID</th>
            <th scope="col">producto</th>
            <th scope="col">cantidad</th>
            <th scope="col">Funcion</th>
        </tr>
    </thead>
    <tbody *ngFor="let detalle of detalles">
        <tr *ngIf="detalle.IdCompra == compra.id">
            <td>{{detalle.id}}</td>
            <td>{{detalle.idProducto}}</td>
            <td>{{detalle.cantidad}}</td>
            <div class="text-center mt-1">
                <a class="btn btn-danger mr-2" (click)="delete(detalle.id)">Borrar</a>
            </div>
        </tr>
    </tbody>
</table>
